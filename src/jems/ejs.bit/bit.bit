/*
    bit.bit -- Bit File for ejs.bit
 */

Bit.load({

    targets: {
        'bit.es': {
            type: 'file',
            precious: true,
            files: [ 'bit.es' ],
            platforms: [ 'local' ],
        },

        'bit': {
            type: 'exe',
            path: '${BIN}/bit${EXE}',
            sources: [ 
                '${SRC}/src/cmd/ejsrun.c',
            ],
            static: true,
            active: true,
            precious: true,
            depends: ['libejs', 'bits', 'bit.es', 'libejs.zlib'],
            platforms: [ 'local' ],
        },

        bits: {
            path: '${BIN}/bits',
            files: [ 'bits/**' ],
            precious: true,
            build: "
                trace('Copy', 'Bit bits')
                rmdir(bit.dir.lib.join('bits'))
                mkdir(bit.dir.lib.join('bits'))
                cp('bits', bit.dir.lib)
            "
            'generate-nmake': '\
                if exist "${BIN}\\bits" rd /Q /S "${BIN}\\bits"
                if not exist "${BIN}\\bits" md "${BIN}\\bits"
                xcopy /S /Y "bits" "${BIN}\\bits"
            ',
            'generate-sh': "\
                rm -fr ${BIN}/bits
                cp -r bits ${BIN}
            ",
            platforms: [ 'local' ],
        },
	},
})
