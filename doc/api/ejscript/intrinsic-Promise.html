<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Class Promise</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>Promise</h1>
<div class='classBlock'>
<table class='classHead' summary='Promise'>
   <tr><td><strong>Module</strong></td><td>ejs</td></tr>
   <tr><td><strong>Definition</strong></td><td>dynamic  class Promise</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>Promise <img src='images/inherit.gif' alt='inherit'/> <a href='intrinsic-Emitter.html'>Emitter</a> <img src='images/inherit.gif' alt='inherit'/> <a href='intrinsic-Object.html'>Object</a><tr><td><strong>Specified</strong></td><td>commonjs</td></tr>
<tr><td><strong>Stability</strong></td><td>Prototype.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>The Promise class permits deferred processing for async APIs.</p>

<p class='classDescription'>A Promise encapsulates callbacks and state for an API
that will take some time to execute. The API can return the promise and the caller can register callbacks for events
of interest.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
   <tr><td colspan='4'>No properties defined</td></tr></table>

<p class='inheritedLink'><a href='intrinsic-Emitter.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='Methods'></a>
<h2 class='classSection'>Promise Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#addCallback'><b>addCallback</b></a>(listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Promise.html'>Promise</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a callback listener for the "success" event.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#addCancelback'><b>addCancelback</b></a>(listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Promise.html'>Promise</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a cancel callback listener for the "cancel" event.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#addErrback'><b>addErrback</b></a>(listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Promise.html'>Promise</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add an error callback listener for the "error" event.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#cancel'><b>cancel</b></a>(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Cancels the promise and removes "success" and "error" and listeners then issues a cancel event.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#emitCancel'><b>emitCancel</b></a>(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Issue an "cancel" event with the given arguments.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#emitError'><b>emitError</b></a>(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Issue an "error" event with the given arguments.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#emitSuccess'><b>emitSuccess</b></a>(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Issue a "success" event with the given arguments.</td></tr>
   <tr class='apiDef'><td class='apiType'> </td><td><a href='#Promise'><b>Promise</b></a>()</tr>   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#then'><b>then</b></a>(success: <a href='intrinsic-Function.html'>Function</a>, error: <a href='intrinsic-Function.html'>Function</a> = null , progress: <a href='intrinsic-Function.html'>Function</a> = null): <a href='intrinsic-Promise.html'>Promise</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Convenience function to register callbacks.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#timeout'><b>timeout</b></a>(msec: <a href='intrinsic-Number.html'>Number</a>): <a href='intrinsic-Promise.html'>Promise</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a timeout for the current promise.</td></tr>
   <tr class='apiDef'><td class='apiType'>const </td><td><a href='#wait'><b>wait</b></a>(timeout: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-Object.html'>Object</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Wait for the promise to complete for a given period.</td></tr>
</table>

<p class='inheritedLink'><a href='intrinsic-Emitter.html#Methods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='addCallback'></a>
<div class='api'>
<div class='apiSig'>const  addCallback(listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Promise.html'>Promise</a>
</div>
<div class='apiDetail'>
<p>Add a callback listener for the "success" event.</p>
<dl><dt>Description</dt><dd>Returns this promise object.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>listener: <a href='intrinsic-Function.html'>Function</a> </td><td>Callback function.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Returns this promise.</dd></dl>
</div>
</div>
<hr />
<a name='addCancelback'></a>
<div class='api'>
<div class='apiSig'>const  addCancelback(listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Promise.html'>Promise</a>
</div>
<div class='apiDetail'>
<p>Add a cancel callback listener for the "cancel" event.</p>
<dl><dt>Description</dt><dd>Returns this promise object.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>listener: <a href='intrinsic-Function.html'>Function</a> </td><td>Callback function.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Returns this promise.</dd></dl>
</div>
</div>
<hr />
<a name='addErrback'></a>
<div class='api'>
<div class='apiSig'>const  addErrback(listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Promise.html'>Promise</a>
</div>
<div class='apiDetail'>
<p>Add an error callback listener for the "error" event.</p>
<dl><dt>Description</dt><dd>Returns this promise object.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>listener: <a href='intrinsic-Function.html'>Function</a> </td><td>Callback function.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Returns this promise.</dd></dl>
</div>
</div>
<hr />
<a name='cancel'></a>
<div class='api'>
<div class='apiSig'>const  cancel(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Cancels the promise and removes "success" and "error" and listeners then issues a cancel event.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>args: <a href='intrinsic-Array.html'>Array</a> </td><td>Args to pass to the "cancel" event listener.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='emitCancel'></a>
<div class='api'>
<div class='apiSig'>const  emitCancel(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Issue an "cancel" event with the given arguments.</p>
<dl><dt>Description</dt><dd>Once a result for the promise has been emitted via emitSucces,
emitError or emitCancel, the Promise in completed and will not emit further events.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>args: <a href='intrinsic-Array.html'>Array</a> </td><td>Args to pass to the listener.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='emitError'></a>
<div class='api'>
<div class='apiSig'>const  emitError(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Issue an "error" event with the given arguments.</p>
<dl><dt>Description</dt><dd>Once a result for the promise has been emitted via emitSucces,
emitError or emitCancel, the Promise in completed and will not emit further events.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>args: <a href='intrinsic-Array.html'>Array</a> </td><td>Args to pass to the listener.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='emitSuccess'></a>
<div class='api'>
<div class='apiSig'>const  emitSuccess(args: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Issue a "success" event with the given arguments.</p>
<dl><dt>Description</dt><dd>Once a result for the promise has been emitted via emitSucces,
emitError or emitCancel, the Promise in completed and will not emit further events.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>args: <a href='intrinsic-Array.html'>Array</a> </td><td>Args to pass to the listener.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='then'></a>
<div class='api'>
<div class='apiSig'>const  then(success: <a href='intrinsic-Function.html'>Function</a>, error: <a href='intrinsic-Function.html'>Function</a> = null , progress: <a href='intrinsic-Function.html'>Function</a> = null): <a href='intrinsic-Promise.html'>Promise</a>
</div>
<div class='apiDetail'>
<p>Convenience function to register callbacks.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>success: <a href='intrinsic-Function.html'>Function</a> </td><td>Success callback passed to addCallback.</td></tr><tr class='param'><td class='param'>error: <a href='intrinsic-Function.html'>Function</a> </td><td>Error callback passed to addErrback. [default: null ]</td></tr><tr class='param'><td class='param'>success: <a href='intrinsic-Function.html'>Function</a> </td><td>Success callback passed to addCallback.</td></tr><tr class='param'><td class='param'>progress: <a href='intrinsic-Function.html'>Function</a> </td><td>Currently ignored. [default: null]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>This promise.</dd></dl>
</div>
</div>
<hr />
<a name='timeout'></a>
<div class='api'>
<div class='apiSig'>const  timeout(msec: <a href='intrinsic-Number.html'>Number</a>): <a href='intrinsic-Promise.html'>Promise</a>
</div>
<div class='apiDetail'>
<p>Create a timeout for the current promise.</p>
<dl><dt>Description</dt><dd>If the timeout expires before the promise completes or is cancelled, a
"timeout" event and then an "error" event will be issued.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>msec: <a href='intrinsic-Number.html'>Number</a> </td><td>Timeout in milliseconds.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>This promise.</dd></dl>
</div>
</div>
<hr />
<a name='wait'></a>
<div class='api'>
<div class='apiSig'>const  wait(timeout: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-Object.html'>Object</a>
</div>
<div class='apiDetail'>
<p>Wait for the promise to complete for a given period.</p>
<dl><dt>Description</dt><dd>This blocks execution until the promise completes or 
is cancelled.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>timeout: <a href='intrinsic-Number.html'>Number</a> </td><td>Time to wait in milliseconds. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The arguments provided to emitSuccess. If multiple arguments, they are returned as an array.</dd></dl>
</div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://www.embedthis.com/">       Embedthis Software LLC, 2003-2010. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
