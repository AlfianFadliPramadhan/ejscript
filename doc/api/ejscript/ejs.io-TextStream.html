<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Class TextStream</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>TextStream</h1>
<div class='classBlock'>
<table class='classHead' summary='TextStream'>
   <tr><td><strong>Module</strong></td><td>ejs.io</td></tr>
   <tr><td><strong>Definition</strong></td><td> class TextStream</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>TextStream <img src='images/inherit.gif' alt='inherit'/> <a href='intrinsic-Object.html'>Object</a><tr><td><strong>Specified</strong></td><td>ejscript-1.1</td></tr>
<tr><td><strong>Stability</strong></td><td>Evolving.</td></tr>
       </td></tr>
</table>

<p class='classBrief'>TextStreams interpret data as a stream of Unicode characters.</p>

<p class='classDescription'>They provide methods to read and write data
in various text encodings and to read/write lines of text appending appropriate system dependent new line 
terminators. TextStreams can be stacked upon other Streams such as files, byte arrays, sockets, or Http objects.</p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='available'></a>
   <tr><td nowrap align='left'>public const get </td><td>available</td><td><a href='intrinsic-Number.html'>Number</a></td><td>The number of bytes available to read. </td></tr>
</table>

<p class='inheritedLink'><a href='intrinsic-Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='Methods'></a>
<h2 class='classSection'>TextStream Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addListener'><b>addListener</b></a>(name, listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a listener to the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#close'><b>close</b></a>(): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Close the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#fill'><b>fill</b></a>(): <a href='intrinsic-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Fill the input buffer from upstream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#flush'><b>flush</b></a>(): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Flush the stream and underlying streams.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#read'><b>read</b></a>(buffer: <a href='intrinsic-ByteArray.html'>ByteArray</a>, offset: <a href='intrinsic-Number.html'>Number</a> = 0 , count: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read characters from the stream into the supplied byte array.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readLine'><b>readLine</b></a>(): <a href='intrinsic-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a line from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readLines'><b>readLines</b></a>(numLines: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-Array.html'>Array</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a required number of lines of data from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readString'><b>readString</b></a>(count: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a string from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#removeListener'><b>removeListener</b></a>(name, listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove a listener from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'> const </td><td><a href='#TextStream'><b>TextStream</b></a>(stream: <a href='intrinsic-Stream.html'>Stream</a>)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Create a text filter stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#write'><b>write</b></a>(data: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write characters to the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#writeLine'><b>writeLine</b></a>(lines: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write text lines to the stream.</td></tr>
</table>

<p class='inheritedLink'><a href='intrinsic-Object.html#Methods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='addListener'></a>
<div class='api'>
<div class='apiSig'>const   public  addListener(name, listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add a listener to the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name </td><td>Name of the event to listen for. The name may be an array of events.</td></tr><tr class='param'><td class='param'>listener: <a href='intrinsic-Function.html'>Function</a> </td><td>Callback listening function. The function is called with the following signature: function listener(event: String, ...args): Void.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' summary ='events'>
<td class='param'>readable</td><td>Issued when the stream becomes readable.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes writable.</td></tr>
<td class='param'>close</td><td>Issued when stream is being closed.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='close'></a>
<div class='api'>
<div class='apiSig'>const   public  close(): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Close the stream.</p>
<dl><dt>Events</dt>
<dd><table class='parameters' summary ='events'>
<td class='param'>close</td><td>Issued before closing the stream.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='fill'></a>
<div class='api'>
<div class='apiSig'>const   public  fill(): <a href='intrinsic-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Fill the input buffer from upstream.</p>
<dl><dt>Returns</dt>
<dd>The number of new characters added to the input bufer.</dd></dl>
</div>
</div>
<hr />
<a name='flush'></a>
<div class='api'>
<div class='apiSig'>const   public  flush(): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Flush the stream and underlying streams.</p>
<dl><dt>Description</dt><dd>The act of flushing requests a stream with buffered data to 
attempt to write all buffered data downstream. Flushing a stream with read data will cause the
stream to discard the read data. If the stream is in sync mode, this call will block until all data is
written. If the stream is in async mode, it will attempt to write all data but will not wait for completion.</dd></dl>
</div>
</div>
<hr />
<a name='read'></a>
<div class='api'>
<div class='apiSig'>const   public  read(buffer: <a href='intrinsic-ByteArray.html'>ByteArray</a>, offset: <a href='intrinsic-Number.html'>Number</a> = 0 , count: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Read characters from the stream into the supplied byte array.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>buffer: <a href='intrinsic-ByteArray.html'>ByteArray</a> </td><td>Destination byte array for the read data.</td></tr><tr class='param'><td class='param'>offset: <a href='intrinsic-Number.html'>Number</a> </td><td>Offset in the byte array to place the data. If the offset is -1, then data is appended to the buffer write <a href='#position'>position</a> which is then updated. [default: 0 ]</td></tr><tr class='param'><td class='param'>count: <a href='intrinsic-Number.html'>Number</a> </td><td>Number of characters to read. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of characters actually read.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='intrinsic-IOError.html'>IOError</a>: if an I/O error occurs.  
</dd>
</dl></div>
</div>
<hr />
<a name='readLine'></a>
<div class='api'>
<div class='apiSig'>const   public  readLine(): <a href='intrinsic-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Read a line from the stream.</p>
<dl><dt>Returns</dt>
<dd>A string containing the next line without newline characters ("r", "n"). Return null on eof.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='intrinsic-IOError.html'>IOError</a>: if an I/O error occurs. 
</dd>
</dl></div>
</div>
<hr />
<a name='readLines'></a>
<div class='api'>
<div class='apiSig'>const   public  readLines(numLines: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-Array.html'>Array</a>
</div>
<div class='apiDetail'>
<p>Read a required number of lines of data from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>numLines: <a href='intrinsic-Number.html'>Number</a> </td><td>Of lines to read. Defaults to read all lines. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Array containing the read lines. Lines are stripped of newline characters ("r", "n").  Return null on eof.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='intrinsic-IOError.html'>IOError</a>: if an I/O error occurs.  
</dd>
</dl></div>
</div>
<hr />
<a name='readString'></a>
<div class='api'>
<div class='apiSig'>const   public  readString(count: <a href='intrinsic-Number.html'>Number</a> = -1): <a href='intrinsic-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Read a string from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>count: <a href='intrinsic-Number.html'>Number</a> </td><td>Of bytes to read. Returns the entire stream contents if count is -1. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A string or null on eof.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='intrinsic-IOError.html'>IOError</a>: if an I/O error occurs.  
</dd>
</dl></div>
</div>
<hr />
<a name='removeListener'></a>
<div class='api'>
<div class='apiSig'>const   public  removeListener(name, listener: <a href='intrinsic-Function.html'>Function</a>): <a href='intrinsic-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Remove a listener from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name </td><td>Event name previously used with addListener. The name may be an array of events.</td></tr><tr class='param'><td class='param'>listener: <a href='intrinsic-Function.html'>Function</a> </td><td>Listener function previously used with addListener.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='TextStream'></a>
<div class='api'>
<div class='apiSig'>const   public  TextStream(stream: <a href='intrinsic-Stream.html'>Stream</a>)
</div>
<div class='apiDetail'>
<p>Create a text filter stream.</p>
<dl><dt>Description</dt><dd>A Text filter stream must be stacked upon a stream source such as a File.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>stream: <a href='intrinsic-Stream.html'>Stream</a> </td><td>Stream data source/sink to stack upon.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>const   public  write(data: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Write characters to the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>data: <a href='intrinsic-Array.html'>Array</a> </td><td>String to write.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The total number of elements that were written.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='intrinsic-IOError.html'>IOError</a>: if there is an I/O error. 
</dd>
</dl></div>
</div>
<hr />
<a name='writeLine'></a>
<div class='api'>
<div class='apiSig'>const   public  writeLine(lines: <a href='intrinsic-Array.html'>Array</a>): <a href='intrinsic-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Write text lines to the stream.</p>
<dl><dt>Description</dt><dd>The text line is written after appending the system text newline character(s).</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>lines: <a href='intrinsic-Array.html'>Array</a> </td><td>Text lines to write.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The number of characters written or -1 if unsuccessful.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='intrinsic-IOError.html'>IOError</a>: if the file could not be written. 
</dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://www.embedthis.com/">       Embedthis Software LLC, 2003-2010. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
