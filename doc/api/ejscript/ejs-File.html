<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Class File</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>File</h1>
<div class='classBlock'>
<table class='classHead' summary='File'>
   <tr><td><strong>Module</strong></td><td>ejs</td></tr>
   <tr><td><strong>Definition</strong></td><td>final  class File</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>File <img src='images/inherit.gif' alt='inherit'/> <a href='ejs-Object.html'>Object</a>       </td></tr>
</table>

<p class='classBrief'>Create a File object and open the requested path.</p>

<p class='classDescription'></p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='canRead'></a>
   <tr><td nowrap align='left'>public const get </td><td>canRead</td><td><a href='ejs-Boolean.html'>Boolean</a></td><td>Is the file opened for reading. </td></tr>
<a name='canWrite'></a>
   <tr><td nowrap align='left'>public const get </td><td>canWrite</td><td><a href='ejs-Boolean.html'>Boolean</a></td><td>Is the file opened for writing. </td></tr>
<a name='isOpen'></a>
   <tr><td nowrap align='left'>public const get </td><td>isOpen</td><td><a href='ejs-Boolean.html'>Boolean</a></td><td>Is the file open. </td></tr>
<a name='options'></a>
   <tr><td nowrap align='left'>public const get </td><td>options</td><td><a href='ejs-Object.html'>Object</a></td><td>Current file options set when opening the file. </td></tr>
<a name='path'></a>
   <tr><td nowrap align='left'>public const get </td><td>path</td><td><a href='ejs-Path.html'>Path</a></td><td>The name of the file associated with this File object or null if there is no associated file. </td></tr>
<a name='size'></a>
   <tr><td nowrap align='left'>public const get </td><td>size</td><td><a href='ejs-Number.html'>Number</a></td><td>The size of the file in bytes. </td></tr>
</table>

<p class='inheritedLink'><a href='ejs-Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='Methods'></a>
<h2 class='classSection'>File Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#close'><b>close</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Close the input stream and free up all associated resources.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#flush'><b>flush</b></a>(dir: <a href='ejs-Number.html'>Number</a> = expression): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Flush the stream and underlying streams.</td></tr>
   <tr class='apiDef'><td class='apiType'>iterator const override </td><td><a href='#get'><b>get</b></a>(): <a href='iterator-Iterator.html'>Iterator</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Iterate over the positions in a file.</td></tr>
   <tr class='apiDef'><td class='apiType'>iterator const override </td><td><a href='#getValues'><b>getValues</b></a>(): <a href='iterator-Iterator.html'>Iterator</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Get an iterator for this file to be used by "for each (v in obj)".</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#observe'><b>observe</b></a>(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add an observer to the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#open'><b>open</b></a>(options: <a href='ejs-Object.html'>Object</a> = null): <a href='ejs-File.html'>File</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Open a file.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#read'><b>read</b></a>(buffer: <a href='ejs-ByteArray.html'>ByteArray</a>, offset: <a href='ejs-Number.html'>Number</a> = 0 , count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read a block of data from a file into a byte array.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readBytes'><b>readBytes</b></a>(count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-ByteArray.html'>ByteArray</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read data bytes from a file and return a byte array containing the data.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#readString'><b>readString</b></a>(count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-String.html'>String</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Read data from a file as a string.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#remove'><b>remove</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove a file.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#removeObserver'><b>removeObserver</b></a>(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove an observer from the stream.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#truncate'><b>truncate</b></a>(value: <a href='ejs-Number.html'>Number</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Truncate the file.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#write'><b>write</b></a>(items: <a href='ejs-Array.html'>Array</a>): <a href='ejs-Number.html'>Number</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Write data to the file.</td></tr>
</table>

<p class='inheritedLink'><a href='ejs-Object.html#Methods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='close'></a>
<div class='api'>
<div class='apiSig'>const   public  close(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Close the input stream and free up all associated resources.</p>
</div>
</div>
<hr />
<a name='flush'></a>
<div class='api'>
<div class='apiSig'>const   public  flush(dir: <a href='ejs-Number.html'>Number</a> = expression): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Flush the stream and underlying streams.</p>
<dl><dt>Description</dt><dd>A supplied flush <a href='#direction'>direction</a> argument modifies the effect of this call.
If direction is set to Stream.READ, then all read data is discarded. If direction is set to Stream.WRITE, 
any buffered data is written. Stream.BOTH will cause both directions to be flushed.  If the stream is in 
sync mode, this call will block until all data is written. If the stream is in async mode, it will attempt 
to write all data but will return immediately</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>dir: <a href='ejs-Number.html'>Number</a> </td><td> [default: expression]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='get'></a>
<div class='api'>
<div class='apiSig'>const override   iterator  get(): <a href='iterator-Iterator.html'>Iterator</a>
</div>
<div class='apiDetail'>
<p>Iterate over the positions in a file.</p>
<dl><dt>Description</dt><dd>This will get an iterator for this file to be used by 
"for (v in files)".</dd></dl>
<dl><dt>Returns</dt>
<dd>An iterator object that will return numeric offset positions in the file.</dd></dl>
</div>
</div>
<hr />
<a name='getValues'></a>
<div class='api'>
<div class='apiSig'>const override   iterator  getValues(): <a href='iterator-Iterator.html'>Iterator</a>
</div>
<div class='apiDetail'>
<p>Get an iterator for this file to be used by "for each (v in obj)".</p>
<dl><dt>Description</dt><dd>Return each byte of the file in turn.</dd></dl>
<dl><dt>Returns</dt>
<dd>An iterator object that will return the bytes of the file.</dd></dl>
</div>
</div>
<hr />
<a name='observe'></a>
<div class='api'>
<div class='apiSig'>const   public  observe(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add an observer to the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name </td><td>Name of the event to listen for. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='ejs-Function.html'>Function</a> </td><td>Callback observer function. The function is called with the following signature: function observer(event: String, ...args): Void.</td></tr></table></dd>
</dl><dl><dt>Events</dt>
<dd><table class='parameters' summary ='events'>
<td class='param'>readable</td><td>Issued when the stream becomes readable.</td></tr>
<td class='param'>writable</td><td>Issued when the stream becomes writable.</td></tr>
<td class='param'>close</td><td>Issued when stream is being closed.</td></tr>
</table></dd>
</dl></div>
</div>
<hr />
<a name='open'></a>
<div class='api'>
<div class='apiSig'>const   public  open(options: <a href='ejs-Object.html'>Object</a> = null): <a href='ejs-File.html'>File</a>
</div>
<div class='apiDetail'>
<p>Open a file.</p>
<dl><dt>Description</dt><dd>This opens the file designated when the File constructor was called.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>options: <a href='ejs-Object.html'>Object</a> </td><td>Optional options. If ommitted, the options default to open the file in read mode. Options can be either a mode string or can be an options hash. [default: null]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' summary ='options'>
<td class='param'>mode</td><td>Optional file access mode string. Use "r" for read, "w" for write, "a" for append to existing content, "+" never truncate. Defaults to "r".</td></tr>
<td class='param'>permissions</td><td>Number containing the Posix permissions number value. Note: this is a number and not a string representation of an octal posix number.</td></tr>
<td class='param'>owner</td><td>String representing the file owner (Not implemented).</td></tr>
<td class='param'>group</td><td>String representing the file group (Not implemented).</td></tr>
</table></dd>
</dl><dl><dt>Returns</dt>
<dd>The File object. This permits method chaining.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the path or file cannot be created.  
</dd>
</dl></div>
</div>
<hr />
<a name='read'></a>
<div class='api'>
<div class='apiSig'>const   public  read(buffer: <a href='ejs-ByteArray.html'>ByteArray</a>, offset: <a href='ejs-Number.html'>Number</a> = 0 , count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Read a block of data from a file into a byte array.</p>
<dl><dt>Description</dt><dd>This will advance the read file's position.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>buffer: <a href='ejs-ByteArray.html'>ByteArray</a> </td><td>Destination byte array for the read data.</td></tr><tr class='param'><td class='param'>offset: <a href='ejs-Number.html'>Number</a> </td><td>Offset in the byte array to place the data. If the offset is -1, then data is appended to the buffer write <a href='#position'>position</a> which is then updated. [default: 0 ]</td></tr><tr class='param'><td class='param'>count: <a href='ejs-Number.html'>Number</a> </td><td>Number of bytes to read. If -1, read much as the buffer will hold up to the entire file if the  buffer is of sufficient size or is growable. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A count of the bytes actually read. Returns null on end of file.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the file could not be read.  
</dd>
</dl></div>
</div>
<hr />
<a name='readBytes'></a>
<div class='api'>
<div class='apiSig'>const   public  readBytes(count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-ByteArray.html'>ByteArray</a>
</div>
<div class='apiDetail'>
<p>Read data bytes from a file and return a byte array containing the data.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>count: <a href='ejs-Number.html'>Number</a> </td><td>Number of bytes to read. If null, read the entire file. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A byte array containing the read data. Returns an empty array on end of file.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the file could not be read.  
</dd>
</dl></div>
</div>
<hr />
<a name='readString'></a>
<div class='api'>
<div class='apiSig'>const   public  readString(count: <a href='ejs-Number.html'>Number</a> = -1): <a href='ejs-String.html'>String</a>
</div>
<div class='apiDetail'>
<p>Read data from a file as a string.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>count: <a href='ejs-Number.html'>Number</a> </td><td>Number of bytes to read. If -1, read the entire file. [default: -1]</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>A string containing the read data. Returns an empty string on end of file.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the file could not be read.  
</dd>
</dl></div>
</div>
<hr />
<a name='remove'></a>
<div class='api'>
<div class='apiSig'>const   public  remove(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Remove a file.</p>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the file could not be removed. 
</dd>
</dl></div>
</div>
<hr />
<a name='removeObserver'></a>
<div class='api'>
<div class='apiSig'>const   public  removeObserver(name, observer: <a href='ejs-Function.html'>Function</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Remove an observer from the stream.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name </td><td>Event name previously used with observe. The name may be an array of events.</td></tr><tr class='param'><td class='param'>observer: <a href='ejs-Function.html'>Function</a> </td><td>Observer function previously used with observe.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='truncate'></a>
<div class='api'>
<div class='apiSig'>const   public  truncate(value: <a href='ejs-Number.html'>Number</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Truncate the file.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>value: <a href='ejs-Number.html'>Number</a> </td><td>The new length of the file.</td></tr></table></dd>
</dl><dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the file's size cannot be changed 
</dd>
</dl></div>
</div>
<hr />
<a name='write'></a>
<div class='api'>
<div class='apiSig'>const   public  write(items: <a href='ejs-Array.html'>Array</a>): <a href='ejs-Number.html'>Number</a>
</div>
<div class='apiDetail'>
<p>Write data to the file.</p>
<dl><dt>Description</dt><dd>If the stream is in sync mode, the write call blocks until the underlying stream or 
endpoint absorbes all the data. If in async-mode, the call accepts whatever data can be accepted immediately 
and returns a count of the elements that have been written.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>items: <a href='ejs-Array.html'>Array</a> </td><td>The data argument can be ByteArrays, strings or Numbers. All other types will call serialize first before writing. Note that numbers will not be written in a cross platform manner. If that is required, use the BinaryStream class to control the byte ordering when writing numbers.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The number of bytes written.</dd></dl>
<dl><dt>Throws</dt><dd>
<a href='ejs-IOError.html'>IOError</a>: if the file could not be written. 
</dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://www.embedthis.com/">       Embedthis Software LLC, 2003-2010. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
