<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Class Router</title>

   <link rel="stylesheet" type="text/css" href="doc.css" />
</head>

<body>
<div class='body'>

<div class="content">

<a name='top'></a>
<h1 class='className'>Router</h1>
<div class='classBlock'>
<table class='classHead' summary='Router'>
   <tr><td><strong>Module</strong></td><td>ejs.web</td></tr>
   <tr><td><strong>Definition</strong></td><td> class Router</td></tr>
   <tr><td><strong>Inheritance</strong></td><td>Router <img src='images/inherit.gif' alt='inherit'/> <a href='ejs-Object.html'>Object</a>       </td></tr>
</table>

<p class='classBrief'>Create a Router instance.</p>

<p class='classDescription'></p>

</div>


<hr />
<a name='Properties'></a>
<h2 class='classSection'>Properties</h2>
<table class='itemTable' summary='properties'>
   <tr><th>Qualifiers</th><th>Property</th><th>Type</th><th width='95%'>Description</th></tr>
<a name='Default'></a>
   <tr><td nowrap align='center'>public static const </td><td>Default</td><td>&nbsp;</td><td>Symbolic constant for Router() to add top-level routes for directory, *..es, *..ejs and a catchall 
route for static pages. Use of this constant will not add routes for MVC content or RESTful resources.</td></tr>
<a name='Restful'></a>
   <tr><td nowrap align='center'>public static const </td><td>Restful</td><td>&nbsp;</td><td>Symbolic constant for Router() to add top-level routes for directory, *..es, *..ejs, generic routes for
RESTful resources and a catchall route for static pages. </td></tr>
<a name='defaultBuilder'></a>
   <tr><td nowrap align='center'>public </td><td>defaultBuilder</td><td>&nbsp;</td><td>Default builder to use when unspecified by a route. </td></tr>
<a name='routes'></a>
   <tr><td nowrap align='center'>public </td><td>routes</td><td><a href='ejs-Object.html'>Object</a></td><td>&nbsp;</td></tr>
</table>

<p class='inheritedLink'><a href='ejs-Object.html#Properties'><i>Inherited Properties</i></a></p>

<hr />
<a name='Methods'></a>
<h2 class='classSection'>Router Methods</h2>
<table class='apiIndex' summary='methods'>
   <tr><th>Qualifiers</th><th width='95%'>Method</th></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#add'><b>add</b></a>(template: <a href='ejs-Object.html'>Object</a>, options: <a href='ejs-Object.html'>Object</a> = null): <a href='ejs.web-Route.html'>Route</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a route.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addCatchall'><b>addCatchall</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a catch-all route for static content.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addDefault'><b>addDefault</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a default MVC controller/action route.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addHandlers'><b>addHandlers</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add routes to handle static content, directories, "es" scripts and stand-alone ejs templated pages.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addHome'><b>addHome</b></a>(target: <a href='ejs-Object.html'>Object</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add a home page route.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addResource'><b>addResource</b></a>(name: <a href='ejs-Object.html'>Object</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add restful routes for a singleton resource.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addResources'><b>addResources</b></a>(name: <a href='ejs-Object.html'>Object</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add restful routes for a resource collection.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#addRestful'><b>addRestful</b></a>(): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Add default restful routes for resources.</td></tr>
   <tr class='apiDef'><td class='apiType'>public static const </td><td><a href='#isDir'><b>isDir</b></a>(request)</tr><tr class='apiBrief'><td>&nbsp;</td><td>Function to test if the Request.filename is a directory.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#lookup'><b>lookup</b></a>(options: <a href='ejs-Object.html'>Object</a>): <a href='ejs.web-Route.html'>Route</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Lookup a route by name.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#remove'><b>remove</b></a>(name: <a href='ejs-String.html'>String</a>): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Remove a route.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#reset'><b>reset</b></a>(request): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Reset the routing tables by removing all routes.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#route'><b>route</b></a>(request): <a href='ejs-Function.html'>Function</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Route a request.</td></tr>
   <tr class='apiDef'><td class='apiType'>public const </td><td><a href='#show'><b>show</b></a>(extra: <a href='ejs-Boolean.html'>Boolean</a> = false): <a href='ejs-Void.html'>Void</a></tr><tr class='apiBrief'><td>&nbsp;</td><td>Show the route table.</td></tr>
</table>

<p class='inheritedLink'><a href='ejs-Object.html#Methods'><i>Inherited Methods</i></a></p>

<hr />
<h2>Method Detail</h2>
<a name='add'></a>
<div class='api'>
<div class='apiSig'>const   public  add(template: <a href='ejs-Object.html'>Object</a>, options: <a href='ejs-Object.html'>Object</a> = null): <a href='ejs.web-Route.html'>Route</a>
</div>
<div class='apiDetail'>
<p>Add a route.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>template: <a href='ejs-Object.html'>Object</a> </td><td>String or Regular Expression defining the form of a matching URI (Request.pathInfo).</td></tr><tr class='param'><td class='param'>options: <a href='ejs-Object.html'>Object</a> </td><td>Route options representing the URI and options to use when servicing the request. If it is a string, it may begin with an ". [default: null]</td></tr></table></dd>
</dl><dl><dt>Options</dt>
<dd><table class='parameters' summary ='options'>
<td class='param'>action</td><td>Action method to service the request if using controllers. This may also be of the form  "controller/action" to set both the action and controller in one property.</td></tr>
<td class='param'>controller</td><td>Controller to service the request.</td></tr>
<td class='param'>name</td><td>Name to give to the route. If absent, the name is created from the controller and action names. The route naming rules are: 1. Use options.name if provided, else 2. Use any action name, else 3. Use "index" The action name is sleuthed from the template if no options are given.</td></tr>
<td class='param'>outer</td><td>Parent route. The parent's template and parameters are appended to this route.</td></tr>
<td class='param'>params</td><td>Override parameter to provide to the request in the Request.params.</td></tr>
<td class='param'>name</td><td>Name for the route.</td></tr>
<td class='param'>method</td><td>String|RegExp HTTP methods to support.</td></tr>
<td class='param'>limits</td><td>Limits object for the requests on this route. See HttpServer.limits.</td></tr>
<td class='param'>location</td><td>Application location to serve the request. Location contains two properties: scriptName  which is the string URI prefix for the application and dir which is a Path to the physical file system  directory containing the applciation.</td></tr>
<td class='param'>params</td><td>Override request parameters.</td></tr>
<td class='param'>parent</td><td>Outer parent route.</td></tr>
<td class='param'>redirect</td><td>Redirect requests on this route to this URI.</td></tr>
<td class='param'>rewrite</td><td>Rewrite function. This can rewrite request properties.</td></tr>
<td class='param'>run</td><td>(Function|Object) This can be either a builder function to serve the request or it can be a  response hash with status, headers and body properties. The builder function should return a function  of the form: function (request: Request): Object.</td></tr>
<td class='param'>set</td><td>Route set name in which to add this route. Defaults to the first component of the template if the template is a string, otherwise "".</td></tr>
<td class='param'>target</td><td>Target for the route. This can be a Uri path or a controller/action pair: ".</td></tr>
</table></dd>
</dl><dl><dt>Example</dt>
<dd><pre>Route("/{controller}(/{action}(/{id}))/", { method: "POST" })
Route("/User/login", {name: "login" })
</pre></dd></dl>
</div>
</div>
<hr />
<a name='addCatchall'></a>
<div class='api'>
<div class='apiSig'>const   public  addCatchall(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add a catch-all route for static content.</p>
</div>
</div>
<hr />
<a name='addDefault'></a>
<div class='api'>
<div class='apiSig'>const   public  addDefault(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add a default MVC controller/action route.</p>
<dl><dt>Description</dt><dd>This consists of a "/{controller}/{action}" route.
All HTTP method verbs are supported.</dd></dl>
</div>
</div>
<hr />
<a name='addHandlers'></a>
<div class='api'>
<div class='apiSig'>const   public  addHandlers(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add routes to handle static content, directories, "es" scripts and stand-alone ejs templated pages.</p>
</div>
</div>
<hr />
<a name='addHome'></a>
<div class='api'>
<div class='apiSig'>const   public  addHome(target: <a href='ejs-Object.html'>Object</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add a home page route.</p>
<dl><dt>Description</dt><dd>This will add or update the "home" page route.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>target: <a href='ejs-Object.html'>Object</a> </td><td>Target to invoke when the home page is accessed.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='addResource'></a>
<div class='api'>
<div class='apiSig'>const   public  addResource(name: <a href='ejs-Object.html'>Object</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add restful routes for a singleton resource.</p>
<dl><dt>Description</dt><dd>Supports member CRUD actions: edit, show, update, and custom actions.
The restful routes defined are:
<pre>
Method  URL                   Action
GET     /controller/edit      edit        Display a resource form suitable for editing
GET     /controller           show        Display a resource (not editable)
PUT     /controller           update      Update a resource (idempotent)
ANY     /controllers/action   *            Other custom actions
</pre>
The default route is used when constructing URIs via Request.link</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name: <a href='ejs-Object.html'>Object</a> </td><td>Name of the resource to route. Can also be an array of names.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='addResources'></a>
<div class='api'>
<div class='apiSig'>const   public  addResources(name: <a href='ejs-Object.html'>Object</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add restful routes for a resource collection.</p>
<dl><dt>Description</dt><dd>Supports CRUD actions: edit, index, show, create, update, destroy. The restful routes defined are:
<pre>
Method  URL                     Action
GET     /controller             index       Display an overview of the resource
GET     /controller/init        init        Initialize and display a blank form for a new resource
POST    /controller             create      Accept a form creating a new resource<br/><br/>GET     /controller/1/edit      edit        Display a resource form suitable for editing
GET     /controller/1           show        Display a resource (not editable)
PUT     /controller/1           update      Update a resource (idempotent)
DELETE  /controller/1           destroy     Destroy a resource (idempotent)<br/><br/>ANY     /controller/action      default     Other custom actions
</pre>
The default route is used when constructing URIs via Request.link</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name: <a href='ejs-Object.html'>Object</a> </td><td>Name of the resource to route. Can also be an array of names.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='addRestful'></a>
<div class='api'>
<div class='apiSig'>const   public  addRestful(): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Add default restful routes for resources.</p>
<dl><dt>Description</dt><dd>This adds default routes for generic resources.
Supports CRUD actions: edit, index, show, create, update, destroy. The restful routes defined are:
<pre>
Method  URL                     Action
GET     /controller             index       Display an overview of the resource
GET     /controller/init        init        Initialize and display a blank form for a new resource
POST    /controller             create      Accept a form creating a new resource<br/><br/>GET     /controller/1/edit      edit        Display a resource form suitable for editing
GET     /controller/1           show        Display a resource (not editable)
PUT     /controller/1           update      Update a resource (idempotent)
DELETE  /controller/1           destroy     Destroy a resource (idempotent)<br/><br/>ANY     /controller/action      default     Other custom actions
</pre>
The default route is used when constructing URIs via Request.link</dd></dl>
</div>
</div>
<hr />
<a name='isDir'></a>
<div class='api'>
<div class='apiSig'>static const   public  isDir(request)
</div>
<div class='apiDetail'>
<p>Function to test if the Request.filename is a directory.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>request </td><td>Request object to consider.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>True if request.filename is a directory.</dd></dl>
</div>
</div>
<hr />
<a name='lookup'></a>
<div class='api'>
<div class='apiSig'>const   public  lookup(options: <a href='ejs-Object.html'>Object</a>): <a href='ejs.web-Route.html'>Route</a>
</div>
<div class='apiDetail'>
<p>Lookup a route by name.</p>
<dl><dt>Description</dt><dd>The route name is determined by the options provided when the route was created.
Action names will be sleuthed from the template if no options provided.
Outer routes are pre-pended if defined.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>options: <a href='ejs-Object.html'>Object</a> </td><td>Route description. This can be either string or object hash. If it is a string, it should be of the form "controller/action". If the options is an object hash, it should have properties controller and action. The controller is used as the index for the route set. The action property is the index for the route name.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>Route object.</dd></dl>
</div>
</div>
<hr />
<a name='remove'></a>
<div class='api'>
<div class='apiSig'>const   public  remove(name: <a href='ejs-String.html'>String</a>): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Remove a route.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>name: <a href='ejs-String.html'>String</a> </td><td>Name of the route to remove. Name should be of the form "controller/action" where controller is the index for the route set and action is the index for the route name.</td></tr></table></dd>
</dl></div>
</div>
<hr />
<a name='reset'></a>
<div class='api'>
<div class='apiSig'>const   public  reset(request): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Reset the routing tables by removing all routes.</p>
</div>
</div>
<hr />
<a name='route'></a>
<div class='api'>
<div class='apiSig'>const   public  route(request): <a href='ejs-Function.html'>Function</a>
</div>
<div class='apiDetail'>
<p>Route a request.</p>
<dl><dt>Description</dt><dd>The request is matched against the configured route table. 
The call returns the web application to execute.</dd></dl>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>request </td><td>The current request object.</td></tr></table></dd>
</dl><dl><dt>Returns</dt>
<dd>The web application function of the signature:  function app(request: Request): Object.</dd></dl>
</div>
</div>
<hr />
<a name='show'></a>
<div class='api'>
<div class='apiSig'>const   public  show(extra: <a href='ejs-Boolean.html'>Boolean</a> = false): <a href='ejs-Void.html'>Void</a>
</div>
<div class='apiDetail'>
<p>Show the route table.</p>
<dl><dt>Parameters</dt>
<dd><table class='parameters' summary ='parameters'>
<tr class='param'><td class='param'>extra: <a href='ejs-Boolean.html'>Boolean</a> </td><td>Set to true to display extra route information. [default: false]</td></tr></table></dd>
</dl></div>
</div>
<hr />
<div class="terms">
   <p class="terms">
       <a href="http://www.embedthis.com/">       Embedthis Software LLC, 2003-2011. All rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
   </p>
</div></div>
</div>
</body>
</html>
