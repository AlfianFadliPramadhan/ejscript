<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ejs: EjsFunction</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>EjsFunction</h1>Function class.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ejs_code.html">EjsCode</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Byte code.  <a href="struct_ejs_code.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ejs_ex.html">EjsEx</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exception Handler Record.  <a href="struct_ejs_ex.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EjsFunction *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#g1b04a89fc17493abd5f3d95dedf036d2">ejsCreateFunction</a> (Ejs *ejs, cchar *name, cuchar *code, int codeLen, int numArgs, int numDefault, int numExceptions, struct EjsType *returnType, int attributes, struct EjsConst *constants, EjsBlock *scope, int strict)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a function object.  <a href="#g1b04a89fc17493abd5f3d95dedf036d2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#g57f528868eed5536dde9dacccd059083">ejsIsFunction</a> (EjsObj *vp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if a variable is a function.  <a href="#g57f528868eed5536dde9dacccd059083"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#g8e764d2fd382cc8f0d4bf34c227db88c">ejsIsInitializer</a> (EjsObj *vp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the function is an initializer.  <a href="#g8e764d2fd382cc8f0d4bf34c227db88c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#g461f8132dd432d5b27d253419c9a85c8">ejsIsNativeFunction</a> (EjsObj *vp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the function is a native function.  <a href="#g461f8132dd432d5b27d253419c9a85c8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EjsObj *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#gfc48c2ee73ed572e466a83f6903d29f9">ejsRunFunction</a> (Ejs *ejs, EjsFunction *fn, EjsObj *obj, int argc, EjsObj **argv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run a function.  <a href="#gfc48c2ee73ed572e466a83f6903d29f9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EjsObj *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#g07c05d4fe96ac9752069730ec21ef7ee">ejsRunFunctionBySlot</a> (Ejs *ejs, EjsObj *obj, int slotNum, int argc, EjsObj **argv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run a function by slot number.  <a href="#g07c05d4fe96ac9752069730ec21ef7ee"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EjsObj *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ejs_function.html#g5a7d2ad5dd3cf09e90d6288ac2ba73fc">ejsRunInitializer</a> (Ejs *ejs, struct EjsModule *module)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run the initializer for a module.  <a href="#g5a7d2ad5dd3cf09e90d6288ac2ba73fc"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Function class. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>The Function type is used to represent closures, function expressions and class methods. It contains a reference to the code to execute, the execution scope and possibly a bound "this" reference. </dd></dl>
<dl class="user" compact><dt><b><b>API</b> Stability:</b></dt><dd>Evolving</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___ejs_function.html" title="Function class.">EjsFunction</a> <a class="el" href="group___ejs_function.html#g57f528868eed5536dde9dacccd059083" title="Determine if a variable is a function.">ejsIsFunction</a> <a class="el" href="group___ejs_function.html#g461f8132dd432d5b27d253419c9a85c8" title="Determine if the function is a native function.">ejsIsNativeFunction</a> <a class="el" href="group___ejs_function.html#g8e764d2fd382cc8f0d4bf34c227db88c" title="Determine if the function is an initializer.">ejsIsInitializer</a> <a class="el" href="group___ejs_function.html#g1b04a89fc17493abd5f3d95dedf036d2" title="Create a function object.">ejsCreateFunction</a> ejsCloneFunction <a class="el" href="group___ejs_function.html#g07c05d4fe96ac9752069730ec21ef7ee" title="Run a function by slot number.">ejsRunFunctionBySlot</a> <a class="el" href="group___ejs_function.html#gfc48c2ee73ed572e466a83f6903d29f9" title="Run a function.">ejsRunFunction</a> <a class="el" href="group___ejs_function.html#g5a7d2ad5dd3cf09e90d6288ac2ba73fc" title="Run the initializer for a module.">ejsRunInitializer</a> </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g1b04a89fc17493abd5f3d95dedf036d2"></a><!-- doxytag: member="ejs.h::ejsCreateFunction" ref="g1b04a89fc17493abd5f3d95dedf036d2" args="(Ejs *ejs, cchar *name, cuchar *code, int codeLen, int numArgs, int numDefault, int numExceptions, struct EjsType *returnType, int attributes, struct EjsConst *constants, EjsBlock *scope, int strict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EjsFunction* ejsCreateFunction           </td>
          <td>(</td>
          <td class="paramtype">Ejs *&nbsp;</td>
          <td class="paramname"> <em>ejs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cchar *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cuchar *&nbsp;</td>
          <td class="paramname"> <em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>codeLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numArgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numDefault</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numExceptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EjsType *&nbsp;</td>
          <td class="paramname"> <em>returnType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EjsConst *&nbsp;</td>
          <td class="paramname"> <em>constants</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EjsBlock *&nbsp;</td>
          <td class="paramname"> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>strict</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a function object. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>This creates a function object and optionally associates byte code with the function. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ejs</em>&nbsp;</td><td>Ejs reference returned from <a class="el" href="group___ejs_obj.html#g50d9d774b3cddd1784d654326cddc237" title="Create a variable.">ejsCreate</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Function name used in stack backtraces. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>code</em>&nbsp;</td><td>Pointer to the byte code. The byte code is not copied so this must be a persistent pointer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>codeLen</em>&nbsp;</td><td>Length of the code. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numArgs</em>&nbsp;</td><td>Number of formal arguments to the function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numDefault</em>&nbsp;</td><td>Number of default args to the function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numExceptions</em>&nbsp;</td><td>Number of exception handlers </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>returnType</em>&nbsp;</td><td>Return type of the function. Set to NULL for no defined type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attributes</em>&nbsp;</td><td>Integer mask of access attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>constants</em>&nbsp;</td><td>Reference to the module constant pool. Some byte code opcodes contain references into the constant pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scope</em>&nbsp;</td><td>Reference to the chain of blocks that that comprises the lexical scope chain for this function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>strict</em>&nbsp;</td><td>Run code in strict mode (vs standard). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An initialized function object </dd></dl>

</div>
</div><p>
<a class="anchor" name="g57f528868eed5536dde9dacccd059083"></a><!-- doxytag: member="ejs.h::ejsIsFunction" ref="g57f528868eed5536dde9dacccd059083" args="(EjsObj *vp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ejsIsFunction           </td>
          <td>(</td>
          <td class="paramtype">EjsObj *&nbsp;</td>
          <td class="paramname"> <em>vp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if a variable is a function. 
<p>
This will return true if the variable is a function of any kind, including methods, native and script functions or initializers. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vp</em>&nbsp;</td><td>Variable to test </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the variable is a function </dd></dl>

</div>
</div><p>
<a class="anchor" name="g8e764d2fd382cc8f0d4bf34c227db88c"></a><!-- doxytag: member="ejs.h::ejsIsInitializer" ref="g8e764d2fd382cc8f0d4bf34c227db88c" args="(EjsObj *vp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ejsIsInitializer           </td>
          <td>(</td>
          <td class="paramtype">EjsObj *&nbsp;</td>
          <td class="paramname"> <em>vp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the function is an initializer. 
<p>
Initializers are special functions created by the compiler to do static and instance initialization of classes during construction. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vp</em>&nbsp;</td><td>Variable to test </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the variable is an initializer </dd></dl>

</div>
</div><p>
<a class="anchor" name="g461f8132dd432d5b27d253419c9a85c8"></a><!-- doxytag: member="ejs.h::ejsIsNativeFunction" ref="g461f8132dd432d5b27d253419c9a85c8" args="(EjsObj *vp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ejsIsNativeFunction           </td>
          <td>(</td>
          <td class="paramtype">EjsObj *&nbsp;</td>
          <td class="paramname"> <em>vp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the function is a native function. 
<p>
Functions can be either native - meaning the implementation is via a C function, or can be scripted. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vp</em>&nbsp;</td><td>Variable to test </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the variable is a native function. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gfc48c2ee73ed572e466a83f6903d29f9"></a><!-- doxytag: member="ejs.h::ejsRunFunction" ref="gfc48c2ee73ed572e466a83f6903d29f9" args="(Ejs *ejs, EjsFunction *fn, EjsObj *obj, int argc, EjsObj **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EjsObj* ejsRunFunction           </td>
          <td>(</td>
          <td class="paramtype">Ejs *&nbsp;</td>
          <td class="paramname"> <em>ejs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EjsFunction *&nbsp;</td>
          <td class="paramname"> <em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EjsObj *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EjsObj **&nbsp;</td>
          <td class="paramname"> <em>argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run a function. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Run a function with the given actual parameters </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ejs</em>&nbsp;</td><td>Ejs reference returned from <a class="el" href="group___ejs_obj.html#g50d9d774b3cddd1784d654326cddc237" title="Create a variable.">ejsCreate</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fn</em>&nbsp;</td><td>Function object to run </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td>Object to use as the "this" object when running the function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argc</em>&nbsp;</td><td>Count of actual parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argv</em>&nbsp;</td><td>Vector of actual parameters </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The return value from the function. If an exception is thrown, NULL will be returned and ejs-&gt;exception will be set to the exception object. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g07c05d4fe96ac9752069730ec21ef7ee"></a><!-- doxytag: member="ejs.h::ejsRunFunctionBySlot" ref="g07c05d4fe96ac9752069730ec21ef7ee" args="(Ejs *ejs, EjsObj *obj, int slotNum, int argc, EjsObj **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EjsObj* ejsRunFunctionBySlot           </td>
          <td>(</td>
          <td class="paramtype">Ejs *&nbsp;</td>
          <td class="paramname"> <em>ejs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EjsObj *&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>slotNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EjsObj **&nbsp;</td>
          <td class="paramname"> <em>argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run a function by slot number. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>Run a function identified by slot number with the given actual parameters. This will run the function stored at <em>slotNum</em> in the <em>obj</em> variable. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ejs</em>&nbsp;</td><td>Ejs reference returned from <a class="el" href="group___ejs_obj.html#g50d9d774b3cddd1784d654326cddc237" title="Create a variable.">ejsCreate</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td>Object that holds the function at its "slotNum" slot. Also use this object as the "this" object when running the function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>slotNum</em>&nbsp;</td><td>Slot number in <em>obj</em> that contains the function to run. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argc</em>&nbsp;</td><td>Count of actual parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argv</em>&nbsp;</td><td>Vector of actual parameters </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The return value from the function. If an exception is thrown, NULL will be returned and ejs-&gt;exception will be set to the exception object. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5a7d2ad5dd3cf09e90d6288ac2ba73fc"></a><!-- doxytag: member="ejs.h::ejsRunInitializer" ref="g5a7d2ad5dd3cf09e90d6288ac2ba73fc" args="(Ejs *ejs, struct EjsModule *module)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EjsObj* ejsRunInitializer           </td>
          <td>(</td>
          <td class="paramtype">Ejs *&nbsp;</td>
          <td class="paramname"> <em>ejs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct EjsModule *&nbsp;</td>
          <td class="paramname"> <em>module</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run the initializer for a module. 
<p>
<dl class="user" compact><dt><b><b>Description</b>:</b></dt><dd>A module's initializer runs global code defined in the module </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ejs</em>&nbsp;</td><td>Ejs reference returned from <a class="el" href="group___ejs_obj.html#g50d9d774b3cddd1784d654326cddc237" title="Create a variable.">ejsCreate</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>module</em>&nbsp;</td><td>Module object reference </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The last expression result of global code executed </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 9 10:40:04 2010 for ejs by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
