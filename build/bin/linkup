#!/bin/bash
#
#   Link up the most recent installed programs into public places
#
#   Copyright (c) Embedthis Software LLC, 2003-2011. All Rights Reserved.
#

BIN=/usr/local/bin
INC=/usr/include
MAN=/usr/share/man

exe=
product=ejs
prefix=/usr/lib/${product}
version=`ls $prefix | egrep -v '[a-zA-Z@!_\-]' | sort -n -r | head -1`
latest=${prefix}/$version
bin=${latest}/bin
inc=${latest}/inc
man=${latest}/man

home=`pwd`
for name in ejs ejsc ejscgi ejsmod ejssql ejsvm ejsweb ejswebserver jem
do
    name=${name}${exe}
    if [ -f "${bin}/${name}" ] ; then
        rm -f  "${BIN}/${name}"
        ln -s "${bin}/${name}" "${BIN}/${name}"
    fi
done

if [ -d "${inc}" ] ; then
    rm -rf  "${INC}/${product}"
    ln -s "${inc}" "${INC}/${product}"
fi
if [ -d "${man}" ] ; then
    cd "${man}" >/dev/null
    for f in */*.gz
    do
        rm -rf  "${MAN}/${f}"
        ln -s "${man}/${f}" "${MAN}/${f}"
    done
    cd - >/dev/null
fi
