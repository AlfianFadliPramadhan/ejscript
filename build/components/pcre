#
#   Pcre
#
defineComponent() {
	local builtin iflags libpaths imports path name headers

    path=${1:-.}
    iflags=-I`probe --name pcre --dir --search "$path:$path/src/deps/pcre:$path/src/include" "pcre.h"`
    if [ "$path" != "." ] ; then
        imports=`probe --name pcre --search "$path:$path/src/deps/pcre:$path/out/lib" "libpcre" `
        if [ "$imports" = "" ] ; then
            warnComponent pcre "Can't locate libpcre"
            return
        fi
        headers=`probe --name pcre.h --search "$path:$path/out/include" "pcre.h" `
        if [ "$headers" = "" ] ; then
            warnComponent pcre "Can't locate pcre.h"
            return
        fi
        imports="$imports $headers"
    fi
    libpaths="${imports%/*}"
    builtin=`[ $path = . ] && echo --builtin`
    configureComponent --libs "pcre" --libpaths "$libpaths" --iflags "$iflags" --imports "$imports" $builtin pcre
}
