<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|Win32">
      <Configuration>Debug</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
  </ItemGroup>

  <PropertyGroup Label="Globals">
    <ProjectGuid>{CC744156-DD04-431C-93DC-52C429356C92}</ProjectGuid>
    <RootNamespace />
    <Keyword>Win32Proj</Keyword>
  </PropertyGroup>

  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
    <ConfigurationType>Application</ConfigurationType>
    <CharacterSet>NotSet</CharacterSet>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
    <ConfigurationType>Application</ConfigurationType>
    <CharacterSet>NotSet</CharacterSet>
  </PropertyGroup>

  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />

  <ImportGroup Label="ExtensionSettings">
  </ImportGroup>

  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
    
    <Import Project="debug.props" />
  </ImportGroup>

  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
    
    <Import Project="release.props" />
  </ImportGroup>

  <PropertyGroup Label="UserMacros" />

  <PropertyGroup>
    <_ProjectFileVersion>10.0.30319.1</_ProjectFileVersion>
    <OutDir Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">..\..\..\out\bin\</OutDir>
    <IntDir Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">..\..\..\out\obj\</IntDir>
    <OutDir Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">..\..\..\out\bin\</OutDir>
    <IntDir Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">..\..\..\out\obj\</IntDir>
  </PropertyGroup>

  <ItemGroup>
    <ClInclude Include="..\..\..\out\include\buildConfig.h" />
  </ItemGroup>

  <ItemGroup >
    <ClCompile Include="..\..\..\src\cmd\ejsc.c" />
  </ItemGroup>

  <ItemDefinitionGroup >
    <Link>
      <AdditionalDependencies>ws2_32.lib;libejs.lib;libmpr.lib;%(AdditionalDependencies)</AdditionalDependencies>
    </Link>
  </ItemDefinitionGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />

			<Tool
				Name="VCCustomBuildTool"
				Description="Build Ejscript Modules"
				CommandLine="if not exist $(TargetDir)\ejs.mod echo Building ejs.mod &amp; cd $(ProjectDir)/../../../src &amp; $(TargetDir)\ejsc --debug --optimize 9 --bind --require null --out $(TargetDir)/ejs.mod core/App.es core/Array.es core/BinaryStream.es core/Block.es core/Boolean.es core/ByteArray.es core/Cmd.es core/CmdArgs.es core/Compat.es core/Config.es core/Date.es core/Debug.es core/Emitter.es core/Error.es core/File.es core/FileSystem.es core/Frame.es core/Function.es core/GC.es core/Global.es core/Http.es core/Iterator.es core/JSON.es core/Loader.es core/Locale.es core/LogFile.es core/Logger.es core/Math.es core/Memory.es core/Name.es core/Namespace.es core/Null.es core/Number.es core/Object.es core/Path.es core/Promise.es core/Reflect.es core/RegExp.es core/Socket.es core/Stream.es core/String.es core/System.es core/TextStream.es core/Timer.es core/Type.es core/Uri.es core/Void.es core/Worker.es core/XML.es core/XMLHttp.es core/XMLList.es&#x0D;&#x0A; if not exist $(ProjectDir)\..\..\..\out\include\ejs.slots.h echo Building ejs.slots.h &amp; $(TargetDir)\ejsmod --require null --listing --cslots $(TargetDir)\ejs.mod &amp; copy *.slots.h $(ProjectDir)\..\..\..\out\include&#x0D;&#x0A; if not exist $(TargetDir)\ejs.web.mod echo Building jems &amp; cd $(ProjectDir)\..\..\..\src\jems &amp; $(TargetDir)\ejsc --debug --optimize 9 ejs.cjs/CommonJS.es ejs.db/Database.es ejs.db/DatabaseConnector.es ejs.db.couch/Couch.es ejs.db.mapper/Record.es ejs.db.sqlite/Sqlite.es ejs.tar/Tar.es ejs.unix/Unix.es ejs.web/Cascade.es ejs.web/CommonLog.es ejs.web/ContentType.es ejs.web/Controller.es ejs.web/Dir.es ejs.web/Google.es ejs.web/Head.es ejs.web/Html.es ejs.web/HttpServer.es ejs.web/MethodOverride.es ejs.web/Middleware.es ejs.web/Mvc.es ejs.web/Request.es ejs.web/Router.es ejs.web/Session.es ejs.web/ShowExceptions.es ejs.web/Static.es ejs.web/Template.es ejs.web/UploadFile.es ejs.web/UrlMap.es ejs.web/Utils.es ejs.web/View.es ejs.web/Web.es ejs.web.jsgi/Cascade.es ejs.web.jsgi/Head.es ejs.web.jsgi/Static.es ejs.template/TemplateParser.es &amp; copy *.mod $(TargetDir)&#x0D;&#x0A; if not exist $(ProjectDir)\..\..\..\out\include\ejs.web.slots.h echo Building jem slots &amp; cd $(TargetDir) &amp; $(TargetDir)\ejsmod --listing --cslots ejs.db.mod ejs.db.couch.mod ejs.db.mapper.mod ejs.db.sqlite.mod  ejs.tar.mod  ejs.unix.mod ejs.web.mod ejs.template.mod &amp; copy *.slots.h $(ProjectDir)\..\..\..\out\include&#x0D;&#x0A;"
				Outputs="$(TargetDir)/ejs.mod"
			/>


  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
</Project>
